{% extends 'base.html' %}
{% block content %}
<h2>Editar proyecto: {{ proyecto.nombre }}</h2>

<p><strong>Jefe:</strong> {{ proyecto.jefe.get_full_name|default:proyecto.jefe.username }}</p>
{% if proyecto.created_by %}
    <p><strong>Creado por:</strong> {{ proyecto.created_by.get_full_name|default:proyecto.created_by.username }} — <small>{{ proyecto.created_at }}</small></p>
{% else %}
    <p class="small">Creado: {{ proyecto.created_at }}</p>
{% endif %}

<form method="post">
    {% csrf_token %}
    <p><strong>Fecha inicio:</strong> {{ proyecto.fecha_inicio }}</p>
    <p><strong>Fecha término:</strong> {{ proyecto.fecha_termino|default:'—' }}</p>
    <div class="mb-3">
        {{ form.nombre.label_tag }}
        {{ form.nombre }}
    </div>

    <div class="mb-3">
        {{ form.tipo.label_tag }}
        {{ form.tipo }}
    </div>

    <div class="mb-3">
        {{ form.complejidad.label_tag }}
        {{ form.complejidad }}
    </div>

    <div class="mb-3">
        {{ form.descripcion.label_tag }}
        {{ form.descripcion }}
    </div>

    <div class="form-check mb-3">
        {{ form.activo }}
        {{ form.activo.label_tag }}
    </div>

    {# Añadir campos fecha como hidden por compatibilidad (la vista ya los inyecta si faltan) #}
    <input type="hidden" name="fecha_inicio" value="{{ proyecto.fecha_inicio }}" />
    <input type="hidden" name="fecha_termino" value="{{ proyecto.fecha_termino }}" />
    <button type="submit" class="btn btn-primary">Guardar cambios</button>
    <a href="{% url 'proyectos:panel' %}" class="btn btn-secondary">Cancelar</a>
</form>

{% endblock %}
